<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IAPPS</title>
    <link rel="stylesheet" href="../css/common.css">
    <link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        #table-container {
            display: flex;
        }

        #table-header {
            flex: 2;
        }

        #table-header>div {
            font-size: .75rem;
            padding: .625rem 1.25rem;
            box-sizing: border-box;
        }

        #table-header>div.active {
            border: 1px solid gray;
            position: relative;
        }

        #table-header>div.active::after {
            content: '';
            position: absolute;
            right: -0.1875rem;
            top: 0;
            width: .1875rem;
            height: 100%;
            background-color: white;
        }

        #table-main {
            flex: 7;
            border: 1px solid gray;
            padding: .625rem 1.25rem;
        }

        #table-main div {
            display: none;
            width: 100%;
        }

        #table-main div.active {
            display: inline-block;
        }

        .m-table-item {
            border: 1px solid gray;
            margin-bottom: .625rem;
            padding-right: .625rem;
        }

        .m-table-item.active .m-table-main {
            display: block;
        }

        .m-table-header {
            padding: 5px;
            font-size: 16px;
        }

        .m-table-main {
            display: none;

        }

        #m-table-container {
            display: none;
        }

        .m-table-main li {
            margin-left: 12% !important;
        }

        @media screen and (max-width: 768px) {
            #table-container {
                display: none;
            }

            #m-table-container {
                display: block;
            }
        }
    </style>
</head>

<body>
    <div id="page-top" style=" position: sticky; top: 0; z-index: 2;"></div>
    <div id="page-title"></div>
    <div class="page-main-other">
        <div class="limit-box">
            <p><strong>The societies and other organisations listed on this page include those primarily focused on
                    plant protection topics.
                    Other societies, such as entomological societies, not primarily focused on plant protection issues,
                    are also included
                    since they often address significant topics of relevance to plant protection.</strong></p>
            <p>By selecting a discipline shown below you will see the list of societies included in our database. Click
                on a society
                listed in blue to visit its website.</p>
            <p>If you find a broken link or would like to nominate a relevant society not currently included in this
                database, please
                contact support@plantprotection.org.</p>
            <!-- 电脑端links -->
            <div id="table-container">
                <div id="table-header">
                </div>
                <div id="table-main">
                </div>
            </div>
            <!-- 移动端links -->
            <div id="m-table-container">


            </div>
        </div>
    </div>
    <div id="page-bottom"></div>
</body>
<script src="../js/common.js"></script>
<script src="../js/Links.js"></script>
<script>
    setTimeout(function () {
        activeNav(5)
        M_active_nav('Links')
        reTitle('Links to Professional Societies and Other Organisations', 'https://www.plantprotection.org/wp-content/uploads/2020/03/symposia_1.jpg')
    }, 500)


    let table_header = document.querySelector('#table-header')
    let table_main = document.querySelector('#table-main')
    let m_table_container = document.querySelector('#m-table-container')
    let table_data_header_html = ''
    let table_data_main_html = ''
    let m_table_data_html = ''
    for (let index = 0; index < links_data.length; index++) {
        const element = links_data[index];
        let table_data_main_li_html = ''
        table_data_header_html += `
            <div>${element.title}</div>
        `
        element.children.forEach(item => {
            table_data_main_li_html += `
                <li>
                    <p class="blue-a">${item.name}</p>
                </li>
            `
        });
        console.log(element.children.length)
        table_data_main_html += `
        <div class="">
                        <ul>
                        ${table_data_main_li_html}
                        </ul>
                    </div>
        `
        m_table_data_html += `
        <div class="m-table-item">
                    <div class="m-table-header">${links_data[index].title}</div>
                    <ul class="m-table-main">
                        ${table_data_main_li_html}
                    </ul>
                </div>
        `
    }
    table_header.innerHTML = table_data_header_html
    table_main.innerHTML = table_data_main_html
    m_table_container.innerHTML = m_table_data_html
    document.querySelector('#table-header>div:first-child').classList.add('active')
    document.querySelector('#table-main>div:first-child').classList.add('active')
    document.querySelector('#m-table-container>div:first-child').classList.add('active')
    let header_list = document.querySelectorAll('#table-header>div')
    let main_list = document.querySelectorAll('#table-main div')
    table_header.addEventListener('click', function (e) {
        e.preventDefault()
        let element_list = [...header_list]
        let current_active = document.querySelector('#table-header>.ative')
        if (current_active === e.target) return
        toggleClass('active', header_list, e.target)
        toggleClass('active', main_list, main_list[element_list.indexOf(e.target)])
    })
    let m_table_header = document.querySelectorAll('.m-table-item>.m-table-header')
    let m_table_item = document.querySelectorAll('.m-table-item')
    m_table_header.forEach(item => {
        item.addEventListener('click', function (e) {
            // console.log(e.target.parentNode)
            toggleClass('active', m_table_item, e.target.parentNode)
        })
    })
</script>

</html>